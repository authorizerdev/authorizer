var e=require("@urql/core"),t=require("react"),n=require("wonka"),r=e.createClient({url:"/graphql"}),u=t.createContext(r),o=u.Provider,i=u.Consumer;function c(){return t.useContext(u)}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}u.displayName="UrqlContext";var a={fetching:!1,stale:!1,error:void 0,data:void 0,extensions:void 0,operation:void 0};function f(e,t){var n=s({},e,t,{fetching:!!t.fetching,stale:!!t.stale});return function(e,t){if("object"!=typeof e||"object"!=typeof t)return e!==t;for(var n in e)if(!(n in t))return!0;for(var r in t)if(e[r]!==t[r])return!0;return!1}(e,n)?n:e}function l(e,t){for(var n=0,r=t.length;n<r;n++)if(e[n]!==t[n])return!0;return!1}function p(r){var u=t.useRef(!0),o=c(),i=t.useState(a),f=i[0],l=i[1],p=t.useCallback((function(t,i){return l(s({},a,{fetching:!0})),n.toPromise(o.executeMutation(e.createRequest(r,t),i||{})).then((function(e){return u.current&&l({fetching:!1,stale:!!e.stale,data:e.data,error:e.error,extensions:e.extensions,operation:e.operation}),e}))}),[o,r,l]);return t.useEffect((function(){return function(){u.current=!1}}),[]),[f,p]}function v(n,r){var u=t.useRef(void 0);return t.useMemo((function(){var t=e.createRequest(n,r);return void 0!==u.current&&u.current.key===t.key?u.current:(u.current=t,t)}),[n,r])}var x=!1;function y(e){var r=c(),u=function(e){if(!e._react){var t=new Set,r=new Map;e.operations$&&n.subscribe((function(e){"teardown"===e.kind&&t.has(e.key)&&(t.delete(e.key),r.delete(e.key))}))(e.operations$),e._react={get:function(e){return r.get(e)},set:function(e,n){t.delete(e),r.set(e,n)},dispose:function(e){t.add(e)}}}return e._react}(r),o=function(e,t){return e.suspense&&(!t||!1!==t.suspense)}(r,e.context),i=v(e.query,e.variables),p=t.useMemo((function(){if(e.pause)return null;var t=r.executeQuery(i,s({},{requestPolicy:e.requestPolicy},e.context));return o?n.onPush((function(e){u.set(i.key,e)}))(t):t}),[u,r,i,o,e.pause,e.requestPolicy,e.context]),y=t.useCallback((function(e,t){if(!e)return{fetching:!1};var r=u.get(i.key);if(r){if(t&&null!=r&&"then"in r)throw r}else{var o,c=n.subscribe((function(e){r=e,o&&o(r)}))(n.takeWhile((function(){return t&&!o||!r}))(e));if(null==r&&t){var s=new Promise((function(e){o=e}));throw u.set(i.key,s),s}c.unsubscribe()}return r||{fetching:!0}}),[u,i]),d=[r,i,e.requestPolicy,e.context,e.pause],h=t.useState((function(){x=!0;try{return[p,f(a,y(p,o)),d]}finally{x=!1}})),b=h[0],g=h[1],k=b[1];return p!==b[0]&&l(b[2],d)&&g([p,k=f(b[1],y(p,o)),d]),t.useEffect((function(){var e=b[0],t=b[2][1],r=!1;function o(e){r=!0,x||g((function(t){var n=f(t[1],e);return t[1]!==n?[t[0],n,t[2]]:t}))}if(e){var i=n.subscribe(o)(n.onEnd((function(){o({fetching:!1})}))(e));return r||o({fetching:!0}),function(){u.dispose(t.key),i.unsubscribe()}}o({fetching:!1})}),[u,b[0],b[2][1]]),[k,t.useCallback((function(t){var c=s({},{requestPolicy:e.requestPolicy},e.context,t);g((function(e){return[o?n.onPush((function(e){u.set(i.key,e)}))(r.executeQuery(i,c)):r.executeQuery(i,c),e[1],d]}))}),[r,u,i,o,y,e.requestPolicy,e.context])]}function d(e,r){var u=c(),o=v(e.query,e.variables),i=t.useRef(r);i.current=r;var p=t.useMemo((function(){return e.pause?null:u.executeSubscription(o,e.context)}),[u,o,e.pause,e.context]),x=[u,o,e.context,e.pause],y=t.useState((function(){return[p,s({},a,{fetching:!!p}),x]})),d=y[0],h=y[1],b=d[1];return p!==d[0]&&l(d[2],x)&&h([p,b=f(d[1],{fetching:!!p}),x]),t.useEffect((function(){function e(e){h((function(t){var n=f(t[1],e);return t[1]===n?t:(i.current&&t[1].data!==n.data&&(n.data=i.current(t[1].data,n.data)),[t[0],n,t[2]])}))}if(d[0])return n.subscribe(e)(n.onEnd((function(){e({fetching:!1})}))(d[0])).unsubscribe;e({fetching:!1})}),[d[0]]),[b,t.useCallback((function(t){var n=u.executeSubscription(o,s({},e.context,t));h((function(e){return[n,e[1],e[2]]}))}),[u,e.context,o])]}exports.Consumer=i,exports.Context=u,exports.Mutation=function(e){var t=p(e.query);return e.children(s({},t[0],{executeMutation:t[1]}))},exports.Provider=o,exports.Query=function(e){var t=y(e);return e.children(s({},t[0],{executeQuery:t[1]}))},exports.Subscription=function(e){var t=d(e,e.handler);return e.children(s({},t[0],{executeSubscription:t[1]}))},exports.useClient=c,exports.useMutation=p,exports.useQuery=y,exports.useSubscription=d,Object.keys(e).forEach((function(t){"default"===t||exports.hasOwnProperty(t)||(exports[t]=e[t])}));
//# sourceMappingURL=urql.min.js.map

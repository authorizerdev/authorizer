"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var t,n,r,a,o=require("react"),i=e(o),l=require("@authorizerdev/authorizer-js"),s=e(require("validator/es/lib/isEmail")),c=e(require("validator/es/lib/isMobilePhone"));function u(){u=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function m(e,t,n,r){var o=Object.create((t&&t.prototype instanceof g?t:g).prototype),i=new N(r||[]);return a(o,"_invoke",{value:P(e,n,i)}),o}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=m;var d="suspendedStart",_="executing",h="completed",f={};function g(){}function b(){}function v(){}var w={};c(w,i,(function(){return this}));var E=Object.getPrototypeOf,y=E&&E(E(T([])));y&&y!==n&&r.call(y,i)&&(w=y);var x=v.prototype=g.prototype=Object.create(w);function k(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function n(a,o,i,l){var s=p(e[a],e,o);if("throw"!==s.type){var c=s.arg,u=c.value;return u&&"object"==typeof u&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,i,l)}),(function(e){n("throw",e,i,l)})):t.resolve(u).then((function(e){c.value=e,i(c)}),(function(e){return n("throw",e,i,l)}))}l(s.arg)}var o;a(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,a){n(e,r,t,a)}))}return o=o?o.then(a,a):a()}})}function P(t,n,r){var a=d;return function(o,i){if(a===_)throw Error("Generator is already running");if(a===h){if("throw"===o)throw i;return{value:e,done:!0}}for(r.method=o,r.arg=i;;){var l=r.delegate;if(l){var s=z(l,r);if(s){if(s===f)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===d)throw a=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=_;var c=p(t,n,r);if("normal"===c.type){if(a=r.done?h:"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(a=h,r.method="throw",r.arg=c.arg)}}}function z(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,z(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=p(a,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,f;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,f):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,f)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function T(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(typeof t+" is not iterable")}return b.prototype=v,a(x,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:b,configurable:!0}),b.displayName=c(v,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,c(e,s,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},k(C.prototype),c(C.prototype,l,(function(){return this})),t.AsyncIterator=C,t.async=function(e,n,r,a,o){void 0===o&&(o=Promise);var i=new C(m(e,n,r,a),o);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(x),c(x,s,"Generator"),c(x,i,(function(){return this})),c(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=T,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(L),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return l.type="throw",l.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],l=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),L(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;L(n)}return a}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:T(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),f}},t}function m(e,t,n,r,a,o,i){try{var l=e[o](i),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,a)}function p(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){m(o,r,a,i,l,"next",e)}function l(e){m(o,r,a,i,l,"throw",e)}i(void 0)}))}}function d(){return(d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}!function(e){e[e.Login=0]="Login",e[e.Signup=1]="Signup",e[e.ForgotPassword=2]="ForgotPassword"}(t||(t={})),function(e){e[e.Primary=0]="Primary",e[e.Default=1]="Default"}(n||(n={})),function(e){e[e.Error=0]="Error",e[e.Success=1]="Success",e[e.Info=2]="Info"}(r||(r={})),function(e){e.SET_USER="SET_USER",e.SET_TOKEN="SET_TOKEN",e.SET_LOADING="SET_LOADING",e.SET_AUTH_DATA="SET_AUTH_DATA",e.SET_CONFIG="SET_CONFIG"}(a||(a={}));var _={default:.15,weak:.4,good:.6,strong:.8,veryStrong:1},h=function(){return"undefined"!=typeof window},f=o.createContext({config:{authorizerURL:"",redirectURL:"/",client_id:"",is_google_login_enabled:!1,is_github_login_enabled:!1,is_facebook_login_enabled:!1,is_linkedin_login_enabled:!1,is_apple_login_enabled:!1,is_twitter_login_enabled:!1,is_microsoft_login_enabled:!1,is_twitch_login_enabled:!1,is_roblox_login_enabled:!1,is_email_verification_enabled:!1,is_basic_authentication_enabled:!1,is_magic_link_login_enabled:!1,is_sign_up_enabled:!1,is_strong_password_enabled:!0,is_multi_factor_auth_enabled:!1,is_mobile_basic_authentication_enabled:!1,is_phone_verification_enabled:!1},user:null,token:null,loading:!1,setLoading:function(){},setToken:function(){},setUser:function(){},setAuthData:function(){},authorizerRef:new l.Authorizer({authorizerURL:"http://localhost:8080",redirectURL:h()?window.location.origin:"/",clientID:""}),logout:function(){var e=p(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()});function g(e,t){switch(t.type){case a.SET_USER:return d({},e,{user:t.payload.user});case a.SET_TOKEN:return d({},e,{token:t.payload.token});case a.SET_LOADING:return d({},e,{loading:t.payload.loading});case a.SET_CONFIG:return d({},e,{config:t.payload.config});case a.SET_AUTH_DATA:return d({},t.payload);default:throw new Error}}var b={user:null,token:null,loading:!0,config:{authorizerURL:"",redirectURL:"/",client_id:"",is_google_login_enabled:!1,is_github_login_enabled:!1,is_facebook_login_enabled:!1,is_linkedin_login_enabled:!1,is_apple_login_enabled:!1,is_twitter_login_enabled:!1,is_microsoft_login_enabled:!1,is_twitch_login_enabled:!1,is_roblox_login_enabled:!1,is_email_verification_enabled:!1,is_basic_authentication_enabled:!1,is_magic_link_login_enabled:!1,is_sign_up_enabled:!1,is_strong_password_enabled:!0,is_multi_factor_auth_enabled:!1,is_mobile_basic_authentication_enabled:!1,is_phone_verification_enabled:!1}},v=function(){return o.useContext(f)},w="default_styled-form-group__ZR0-U",E="default_form-input-label__UvinM",y="default_form-input-field__G8P0W",x="default_input-error-content__Ogcjm",k="default_form-input-error__qq-T7";!function(e,t){void 0===t&&(t={});var n=t.insertAt;if("undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css","top"===n&&r.firstChild?r.insertBefore(a,r.firstChild):r.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}}(":root {\n  --authorizer-primary-color: #3b82f6;\n  --authorizer-primary-disabled-color: #60a5fa;\n  --authorizer-gray-color: #d1d5db;\n  --authorizer-slate-color: #e2e8f0;\n  --authorizer-white-color: #ffffff;\n  --authorizer-danger-color: #dc2626;\n  --authorizer-success-color: #10b981;\n  --authorizer-text-color: #374151;\n  --authorizer-fonts-font-stack: -apple-system, system-ui, sans-serif;\n  --authorizer-fonts-large-text: 18px;\n  --authorizer-fonts-medium-text: 14px;\n  --authorizer-fonts-small-text: 12px;\n  --authorizer-fonts-tiny-text: 10px;\n  --authorizer-radius-card: 5px;\n  --authorizer-radius-button: 5px;\n  --authorizer-radius-input: 5px;\n}\n.default_styled-button__nC8O8 {\n  padding: 15px 10px !important;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  max-height: 64px;\n  border-radius: var(--authorizer-radius-button);\n  border-color: var(--authorizer-text-color) !important;\n  border-style: solid !important;\n  cursor: pointer;\n  position: relative;\n}\n.default_styled-button__nC8O8:disabled {\n  cursor: not-allowed;\n  background-color: var(--authorizer-primary-disabled-color);\n}\n.default_styled-flex__-Ht-R {\n  display: flex;\n}\n.default_styled-footer__CcCGy {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  margin-top: 15px;\n}\n.default_styled-form-group__ZR0-U {\n  width: 100%;\n  border: 0px;\n  background-color: var(--authorizer-white-color);\n  padding: 0 0 15px;\n}\n.default_form-input-label__UvinM {\n  padding: 2.5px;\n}\n.default_form-input-label__UvinM > span {\n  color: var(--authorizer-danger-color);\n}\n.default_form-input-field__G8P0W {\n  width: 100%;\n  margin-top: 5px;\n  padding: 10px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  border-radius: var(--authorizer-radius-input);\n  border: 1px;\n  border-style: solid;\n  border-color: var(--authorizer-text-color);\n}\n.default_input-error-content__Ogcjm {\n  border-color: var(--authorizer-danger-color) !important;\n}\n.default_input-error-content__Ogcjm:hover {\n  outline-color: var(--authorizer-danger-color);\n}\n.default_input-error-content__Ogcjm:focus {\n  outline-color: var(--authorizer-danger-color);\n}\n.default_form-input-error__qq-T7 {\n  font-size: 12px;\n  font-weight: 400;\n  color: red;\n  border-color: var(--authorizer-danger-color);\n}\n.default_styled-link__msGJf {\n  color: var(--authorizer-primary-color);\n  cursor: pointer;\n}\n.default_styled-message-wrapper__hPNs7 {\n  padding: 10px;\n  color: white;\n  border-radius: var(--authorizer-radius-card);\n  margin: 10px 0px;\n  font-size: var(--authorizer-fonts-small-text);\n}\n.default_styled-password-strength__MEGkw {\n  width: 100%;\n  height: 10px;\n  flex: 0.75;\n  border-radius: 5px;\n  margin-right: 5px;\n  background-color: var(--authorizer-primary-color);\n}\n.default_styled-password-strength-wrapper__F0N3N {\n  margin: 2% 0 0;\n}\n.default_styled-separator__6ukq- {\n  display: flex;\n  align-items: center;\n  text-align: center;\n  margin: 10px 0px;\n}\n.default_styled-separator__6ukq-::before {\n  content: '';\n  flex: 1;\n  border-bottom: 1px solid var(--authorizer-gray-color);\n}\n.default_styled-separator__6ukq-::after {\n  content: '';\n  flex: 1;\n  border-bottom: 1px solid var(--authorizer-gray-color);\n}\n.default_styled-separator__6ukq-:not(:empty)::before {\n  margin-right: 0.25em;\n}\n.default_styled-separator__6ukq-:not(:empty)::after {\n  margin-left: 0.25em;\n}\n.default_styled-wrapper__d53e1 {\n  font-family: var(--authorizer-fonts-font-stack);\n  color: var(--authorizer-text-color);\n  font-size: var(--authorizer-fonts-medium-text);\n  box-sizing: border-box;\n  width: 100%;\n  min-width: 300px;\n}\n.default_styled-wrapper__d53e1 *,\n*:before,\n*:after {\n  box-sizing: inherit;\n}\n");var C=function(e){return i.createElement("div",{className:"default_styled-wrapper__d53e1"},e.children)},P=function(e){var t=e.style,r=e.appearance,a=void 0===r?n.Default:r,o=e.disabled,l=void 0!==o&&o;return i.createElement("button",{className:"default_styled-button__nC8O8",type:e.type,style:{width:(void 0===t?{width:"100%"}:t).width,backgroundColor:l?"var(--authorizer-primary-disabled-color)":a===n.Primary?"var(--authorizer-primary-color)":"var(--authorizer-white-color)",color:a===n.Default?"var(--authorizer-text-color)":"var(--authorizer-white-color)",border:a===n.Primary?"0px":"1px"},disabled:l,onClick:e.onClick},e.children)},z=function(e){var t=e.marginBottom;return i.createElement("span",{className:"default_styled-link__msGJf",style:{marginBottom:void 0===t?"0px":t},onClick:e.onClick},e.children)},S=function(e){return i.createElement("div",{className:"default_styled-separator__6ukq-"},e.children)},L=function(e){return i.createElement("div",{className:"default_styled-footer__CcCGy"},e.children)},N=function(e){switch(e){case r.Error:return"var(--authorizer-danger-color)";case r.Success:return"var(--authorizer-success-color)";case r.Info:return"var(--authorizer-slate-color)";default:return"var(--authorizer-success-color)"}},T=function(e){var t=e.type,n=e.styles,a=void 0===n?{}:n,o=e.children;return i.createElement("div",{className:"default_styled-message-wrapper__hPNs7",style:d({backgroundColor:N(void 0===t?r.Success:t)},a)},o)},A=function(e){var t=e.flexDirection,n=e.alignItems,r=e.justifyContent,a=e.wrap,o=e.width;return i.createElement("div",{className:"default_styled-flex__-Ht-R",style:{flexDirection:void 0===t?"row":t,alignItems:void 0===n?"center":n,justifyContent:void 0===r?"center":r,flexWrap:void 0===a?"wrap":a,width:void 0===o?"inherit":o}},e.children)},O=function(e){var t=e.strength;return i.createElement("div",{className:"default_styled-password-strength__MEGkw",style:{opacity:_[void 0===t?"default":t]}},e.children)},R=function(e){return i.createElement("div",{className:"default_styled-password-strength-wrapper__F0N3N"},e.children)},F=function(e){return e.replace("[GraphQL] ","")},U=function(){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1000 1000",width:"10px",height:"10px"},i.createElement("g",null,i.createElement("path",{fill:"#ffffff",d:"M617.2,495.8l349.1,350.9c31.7,31.8,31.7,83.5,0,115.3c-31.7,31.9-83.1,31.9-114.8,0L502.4,611.2L149.8,965.6c-32,32.2-83.8,32.2-115.8,0c-32-32.1-32-84.3,0-116.4l352.6-354.5L48.2,154.6c-31.7-31.9-31.7-83.5,0-115.4c31.7-31.9,83.1-31.9,114.7,0l338.4,340.2l343.3-345c32-32.1,83.8-32.1,115.8,0c32,32.2,32,84.3,0,116.4L617.2,495.8z"})))},I=function(e){var t,n=e.type,r=e.text,a=e.extraStyles,o=e.onClose;return r.trim()?i.createElement(T,{type:n,styles:a},i.createElement(A,{alignItems:"center",justifyContent:"space-between"},i.createElement("div",{style:{flex:1}},(t=r).charAt(0).toUpperCase()+t.slice(1)),o&&i.createElement("span",{style:{cursor:"pointer"},onClick:o},i.createElement(U,null)))):null},D=function(e){var t={score:0,strength:"",hasSixChar:!1,hasLowerCase:!1,hasUpperCase:!1,hasNumericChar:!1,hasSpecialChar:!1,maxThirtySixChar:!1};e.length>=6&&(t.score=t.score+1,t.hasSixChar=!0),e.length>0&&e.length<=36&&(t.score=t.score+1,t.maxThirtySixChar=!0),Array.from(e).forEach((function(e){e>="A"&&e<="Z"&&!t.hasUpperCase?(t.score=t.score+1,t.hasUpperCase=!0):e>="a"&&e<="z"&&!t.hasLowerCase?(t.score=t.score+1,t.hasLowerCase=!0):e>="0"&&e<="9"&&!t.hasNumericChar?(t.score=t.score+1,t.hasNumericChar=!0):/[`!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?~]/.test(e)&&!t.hasSpecialChar&&(t.score=t.score+1,t.hasSpecialChar=!0)})),t.strength=t.score<=2?"Weak":t.score<=4?"Good":t.score<=5?"Strong":"Very Strong";var n=Object.values(t).every((function(e){return Boolean(e)}));return d({},t,{isValid:n})},j=function(e){var t=e.value,n=e.setDisableButton,r=i.useState(d({},D(t||""))),a=r[0],o=a.strength,l=a.score,s=a.hasSixChar,c=a.hasLowerCase,u=a.hasNumericChar,m=a.hasSpecialChar,p=a.hasUpperCase,_=a.maxThirtySixChar,h=r[1];return i.useEffect((function(){var e=D(t||"");h(d({},e)),n(!e.isValid)}),[t]),i.createElement("div",null,i.createElement(R,null,i.createElement(A,{alignItems:"center",justifyContent:"center",wrap:"nowrap"},i.createElement(O,{strength:l>2?"weak":"default"}),i.createElement(O,{strength:l>3?"good":"default"}),i.createElement(O,{strength:l>4?"strong":"default"}),i.createElement(O,{strength:l>5?"veryStrong":"default"}),!!l&&i.createElement("div",null,o))),i.createElement("p",null,i.createElement("b",null,"Criteria for a strong password:")),i.createElement(A,{flexDirection:"column"},i.createElement(A,{justifyContent:"flex-start",alignItems:"center",width:"100%"},i.createElement("input",{readOnly:!0,type:"checkbox",checked:s}),i.createElement("div",{style:{marginLeft:"5px"}},"At least 6 characters")),i.createElement(A,{justifyContent:"flex-start",alignItems:"center",width:"100%"},i.createElement("input",{readOnly:!0,type:"checkbox",checked:c}),i.createElement("div",{style:{marginLeft:"5px"}},"At least 1 lowercase letter")),i.createElement(A,{justifyContent:"flex-start",alignItems:"center",width:"100%"},i.createElement("input",{readOnly:!0,type:"checkbox",checked:p}),i.createElement("div",{style:{marginLeft:"5px"}},"At least 1 uppercase letter")),i.createElement(A,{justifyContent:"flex-start",alignItems:"center",width:"100%"},i.createElement("input",{readOnly:!0,type:"checkbox",checked:u}),i.createElement("div",{style:{marginLeft:"5px"}},"At least 1 numeric character")),i.createElement(A,{justifyContent:"flex-start",alignItems:"center",width:"100%"},i.createElement("input",{readOnly:!0,type:"checkbox",checked:m}),i.createElement("div",{style:{marginLeft:"5px"}},"At least 1 special character")),i.createElement(A,{justifyContent:"flex-start",alignItems:"center",width:"100%"},i.createElement("input",{readOnly:!0,type:"checkbox",checked:_}),i.createElement("div",{style:{marginLeft:"5px"}},"Maximum 36 characters"))))},M=function(e){var a=e.setView,l=e.onLogin,s=e.email,c=e.phone_number,m=e.urlProps,_=e.is_totp,h=o.useState(""),f=h[0],g=h[1],b=o.useState(""),C=b[0],S=b[1],N=o.useState(!1),T=N[0],A=N[1],O=o.useState(!1),R=O[0],F=O[1],U=o.useState({otp:null}),D=U[0],j=U[1],M=o.useState({otp:null}),V=M[0],q=M[1],H=v(),G=H.authorizerRef,B=H.config,W=H.setAuthData;o.useEffect((function(){s||c||g("Email or Phone Number is required")}),[]);var Z=function(){var e=p(u().mark((function e(t,n){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:j(d({},D,((r={})[t]=n,r)));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),K=function(){var e=p(u().mark((function e(t){var n,r,a,o,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),S(""),e.prev=2,A(!0),n={email:s,phone_number:c,otp:D.otp||""},null!=m&&m.state&&(n.state=m.state),n.is_totp=!!_,e.next=9,G.verifyOtp(n);case 9:if(a=(r=e.sent).data,o=r.errors,A(!1),!o||!o.length){e.next=16;break}return g((null==(i=o[0])?void 0:i.message)||""),e.abrupt("return");case 16:a&&(g(""),W({user:a.user||null,token:{access_token:a.access_token,expires_in:a.expires_in,refresh_token:a.refresh_token,id_token:a.id_token},config:B,loading:!1})),l&&l(a),e.next=24;break;case 20:e.prev=20,e.t0=e.catch(2),A(!1),g(e.t0.message);case 24:case"end":return e.stop()}}),e,null,[[2,20]])})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=p(u().mark((function e(){var t,n,r,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S(""),e.prev=1,F(!0),e.next=5,G.resendOtp({email:s,phone_number:c});case 5:if(n=(t=e.sent).data,r=t.errors,F(!1),!r||!r.length){e.next=12;break}return g((null==(a=r[0])?void 0:a.message)||""),e.abrupt("return");case 12:n&&null!=n&&n.message&&(g(""),S(n.message)),l&&l(n),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(1),A(!1),g(e.t0.message);case 20:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(){return e.apply(this,arguments)}}();return o.useEffect((function(){q(d({},V,""===D.otp?{otp:"OTP is required"}:{otp:null}))}),[D.otp]),i.createElement(i.Fragment,null,C&&i.createElement(I,{type:r.Success,text:C,onClose:function(){S("")}}),f&&i.createElement(I,{type:r.Error,text:f,onClose:function(){g("")}}),i.createElement("p",{style:{textAlign:"center",margin:"10px 0px"}},"Please enter the OTP sent to your email or phone number or authenticator"),i.createElement("br",null),i.createElement("form",{onSubmit:K,name:"authorizer-mfa-otp-form"},i.createElement("div",{className:w},i.createElement("label",{className:E,htmlFor:"authorizer-verify-otp"},i.createElement("span",null,"* "),"OTP (One Time Password)"),i.createElement("input",{name:"otp",id:"authorizer-verify-otp",className:y+" "+(V.otp?x:null),placeholder:"e.g.- AB123C",type:"password",value:D.otp||"",onChange:function(e){return Z("otp",e.target.value)}}),V.otp&&i.createElement("div",{className:k},V.otp),_&&i.createElement(I,{type:r.Info,text:"If you have lost access to your device, please enter recovery code that were shared while enabling Multifactor Authentication.",extraStyles:{color:"var(--authorizer-text-color)"}})),i.createElement("br",null),i.createElement(P,{type:"submit",disabled:T||!D.otp||!!V.otp,appearance:n.Primary},T?"Processing ...":"Submit")),a&&i.createElement(L,null,R?i.createElement("div",{style:{marginBottom:"10px"}},"Sending ..."):i.createElement(z,{onClick:J,marginBottom:"10px"},"Resend OTP"),B.is_sign_up_enabled&&i.createElement("div",null,"Don't have an account?"," ",i.createElement(z,{onClick:function(){return a(t.Signup)}},"Sign Up"))))},V=function(e){return e.is_basic_authentication_enabled&&e.is_mobile_basic_authentication_enabled?"Email / Phone Number":e.is_basic_authentication_enabled?"Email":e.is_mobile_basic_authentication_enabled?"Phone Number":"Email"},q=function(e){return e.is_basic_authentication_enabled&&e.is_mobile_basic_authentication_enabled?"eg. hello@world.com / +919999999999":e.is_basic_authentication_enabled?"eg. hello@world.com":e.is_mobile_basic_authentication_enabled?"eg. +919999999999":"hello@world.com"},H={is_screen_visible:!1,email:"",phone_number:""},G=function(e){var a=e.setView,l=e.onSignup,m=e.urlProps,_=e.roles,h=o.useState(""),f=h[0],g=h[1],b=o.useState(!1),C=b[0],S=b[1],N=o.useState(d({},H)),T=N[0],A=N[1],O=o.useState(""),R=O[0],U=O[1],D=o.useState({given_name:null,family_name:null,email_or_phone_number:null,password:null,confirmPassword:null}),G=D[0],B=D[1],W=o.useState({given_name:null,family_name:null,email_or_phone_number:null,password:null,confirmPassword:null}),Z=W[0],K=W[1],J=v(),Q=J.authorizerRef,Y=J.config,X=J.setAuthData,$=o.useState(!1),ee=$[0],te=$[1],ne=function(){var e=p(u().mark((function e(t,n){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:B(d({},G,((r={})[t]=n,r)));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),re=function(){var e=p(u().mark((function e(t){var n,r,a,o,i,p,h;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,S(!0),n="",r="",G.email_or_phone_number&&(s(G.email_or_phone_number)?n=G.email_or_phone_number:c(G.email_or_phone_number)&&(r=G.email_or_phone_number)),n||r){e.next=10;break}return K(d({},Z,{email_or_phone_number:"Invalid email or phone number"})),S(!1),e.abrupt("return");case 10:return a={email:n,phone_number:r,given_name:G.given_name||"",family_name:G.family_name||"",password:G.password||"",confirm_password:G.confirmPassword||""},null!=m&&m.scope&&(a.scope=m.scope),null!=m&&m.roles&&(a.roles=m.roles),null!=m&&m.redirect_uri&&(a.redirect_uri=m.redirect_uri),null!=m&&m.state&&(a.state=m.state),_&&_.length&&(a.roles=_),e.next=18,Q.signup(a);case 18:if(i=(o=e.sent).data,!(p=o.errors)||!p.length){e.next=25;break}return g(F(null==(h=p[0])?void 0:h.message)),S(!1),e.abrupt("return");case 25:if(!i||!(null!=i&&i.should_show_email_otp_screen||null!=i&&i.should_show_mobile_otp_screen)){e.next=28;break}return A({is_screen_visible:!0,email:a.email||"",phone_number:a.phone_number||""}),e.abrupt("return");case 28:i&&(g(""),i.access_token?(g(""),X({user:i.user||null,token:{access_token:i.access_token,expires_in:i.expires_in,refresh_token:i.refresh_token,id_token:i.id_token},config:Y,loading:!1})):(S(!1),U(i.message||"")),l&&l(i)),e.next=35;break;case 31:e.prev=31,e.t0=e.catch(1),S(!1),g(F(e.t0.message));case 35:case"end":return e.stop()}}),e,null,[[1,31]])})));return function(t){return e.apply(this,arguments)}}();return o.useEffect((function(){""===(G.given_name||"").trim()?K(d({},Z,{given_name:"First Name is required"})):K(d({},Z,{given_name:null}))}),[G.given_name]),o.useEffect((function(){""===(G.family_name||"").trim()?K(d({},Z,{family_name:"Last Name is required"})):K(d({},Z,{family_name:null}))}),[G.family_name]),o.useEffect((function(){""===G.email_or_phone_number?K(d({},Z,{email_or_phone_number:"Email OR Phone Number is required"})):s(G.email_or_phone_number||"")||c(G.email_or_phone_number||"")?K(d({},Z,{email_or_phone_number:null})):K(d({},Z,{email_or_phone_number:"Invalid Email OR Phone Number"}))}),[G.email_or_phone_number]),o.useEffect((function(){K(d({},Z,""===G.password?{password:"Password is required"}:{password:null}))}),[G.password]),o.useEffect((function(){K(d({},Z,""===G.confirmPassword?{confirmPassword:"Confirm password is required"}:{confirmPassword:null}))}),[G.confirmPassword]),o.useEffect((function(){G.password&&G.confirmPassword&&K(d({},Z,G.confirmPassword!==G.password?{password:"Password and confirm passwords don't match",confirmPassword:"Password and confirm passwords don't match"}:{password:null,confirmPassword:null}))}),[G.password,G.confirmPassword]),T.is_screen_visible?i.createElement(i.Fragment,null,R&&i.createElement(I,{type:r.Success,text:R}),i.createElement(M,Object.assign({},{setView:a,onLogin:l,email:T.email||"",phone_number:T.phone_number||"",is_totp:T.is_totp||!1},{urlProps:m}))):i.createElement(i.Fragment,null,f&&i.createElement(I,{type:r.Error,text:f,onClose:function(){g("")}}),R&&i.createElement(I,{type:r.Success,text:R}),(Y.is_basic_authentication_enabled||Y.is_mobile_basic_authentication_enabled)&&!Y.is_magic_link_login_enabled&&i.createElement(i.Fragment,null,i.createElement("form",{onSubmit:re,name:"authorizer-sign-up-form"},i.createElement("div",{className:w},i.createElement("label",{className:E,htmlFor:"authorizer-sign-up-given-name"},i.createElement("span",null,"* "),"First Name"),i.createElement("input",{name:"given_name",id:"authorizer-sign-up-given-name",className:y+" "+(Z.given_name?x:null),placeholder:"eg. John",type:"text",value:G.given_name||"",onChange:function(e){return ne("given_name",e.target.value)}}),Z.given_name&&i.createElement("div",{className:k},Z.given_name)),i.createElement("div",{className:w},i.createElement("label",{className:E,htmlFor:"authorizer-sign-up-family-name"},i.createElement("span",null,"* "),"Last Name"),i.createElement("input",{name:"family_name",id:"authorizer-sign-up-family-name",className:y+" "+(Z.family_name?x:null),placeholder:"eg. Doe",type:"text",value:G.family_name||"",onChange:function(e){return ne("family_name",e.target.value)}}),Z.family_name&&i.createElement("div",{className:k},Z.family_name)),i.createElement("div",{className:w},i.createElement("label",{className:E,htmlFor:"authorizer-sign-up-email-or-phone-number"},i.createElement("span",null,"* "),V(Y)),i.createElement("input",{name:"email_or_phone_number",id:"authorizer-sign-up-email-or-phone-number",className:y+" "+(Z.email_or_phone_number?x:null),placeholder:q(Y),type:"text",value:G.email_or_phone_number||"",onChange:function(e){return ne("email_or_phone_number",e.target.value)}}),Z.email_or_phone_number&&i.createElement("div",{className:k},Z.email_or_phone_number)),i.createElement("div",{className:w},i.createElement("label",{className:E,htmlFor:"authorizer-sign-up-password"},i.createElement("span",null,"* "),"Password"),i.createElement("input",{name:"password",id:"authorizer-sign-up-password",className:y+" "+(Z.password?x:null),placeholder:"********",type:"password",value:G.password||"",onChange:function(e){return ne("password",e.target.value)}}),Z.password&&i.createElement("div",{className:k},Z.password)),i.createElement("div",{className:w},i.createElement("label",{className:E,htmlFor:"authorizer-sign-up-confirm-password"},i.createElement("span",null,"* "),"Confirm Password"),i.createElement("input",{name:"confirmPassword",id:"authorizer-sign-up-confirm-password",className:y+" "+(Z.confirmPassword?x:null),placeholder:"********",type:"password",value:G.confirmPassword||"",onChange:function(e){return ne("confirmPassword",e.target.value)}}),Z.confirmPassword&&i.createElement("div",{className:k},Z.confirmPassword)),Y.is_strong_password_enabled&&i.createElement(i.Fragment,null,i.createElement(j,{value:G.password||"",setDisableButton:te}),i.createElement("br",null)),i.createElement("br",null),i.createElement(P,{type:"submit",disabled:C||ee||!!Z.given_name||!!Z.family_name||!!Z.email_or_phone_number||!!Z.password||!!Z.confirmPassword||!G.given_name||!G.family_name||!G.email_or_phone_number||!G.password||!G.confirmPassword,appearance:n.Primary},C?"Processing ...":"Sign Up")),a&&i.createElement(L,null,i.createElement("div",null,"Already have an account?"," ",i.createElement(z,{onClick:function(){return a(t.Login)}},"Log In")))))},B=function(e){var t=e.setView,r=e.onLogin,a=e.email,l=e.phone_number,s=e.authenticator_scanner_image,c=e.authenticator_secret,u=e.authenticator_recovery_codes,m=e.urlProps,p=o.useState(!1),d=p[1];return p[0]?i.createElement(M,Object.assign({},{setView:t,onLogin:r,email:a,phone_number:l,urlProps:m},{is_totp:!0})):i.createElement(i.Fragment,null,i.createElement("p",{style:{margin:"10px 0px",fontWeight:"bold"}},"Scan the QR code or enter the secret key into your authenticator app."),i.createElement(A,{justifyContent:"center"},i.createElement("img",{src:"data:image/jpeg;base64,"+s,alt:"scanner"})),i.createElement("p",{style:{margin:"10px 0px"}},"If you are unable to scan the QR code, please enter the secret key manually."),i.createElement("p",{style:{margin:"10px 0px",fontWeight:"bold"}},c),i.createElement(S,null),i.createElement("p",{style:{margin:"10px 0px"}},"If you lose access to your authenticator app, you can use the recovery codes below to regain access to your account. Please save these codes safely and do not share them with anyone."),i.createElement("ul",null,u.map((function(e,t){return i.createElement("li",{key:t},e)}))),i.createElement(P,{type:"button",appearance:n.Primary,onClick:function(){d(!0)}},"Continue"))},W={is_screen_visible:!1,email:"",phone_number:""},Z={is_screen_visible:!1,email:"",phone_number:"",authenticator_scanner_image:"",authenticator_secret:"",authenticator_recovery_codes:[]},K=function(e){var a=e.setView,l=e.onLogin,m=e.urlProps,_=e.roles,h=o.useState(""),f=h[0],g=h[1],b=o.useState(!1),C=b[0],S=b[1],N=o.useState(d({},W)),T=N[0],A=N[1],O=o.useState(d({},Z)),R=O[0],F=O[1],U=o.useState({email_or_phone_number:null,password:null}),D=U[0],j=U[1],H=o.useState({email_or_phone_number:null,password:null}),G=H[0],K=H[1],J=v(),Q=J.setAuthData,Y=J.config,X=J.authorizerRef,$=function(){var e=p(u().mark((function e(t,n){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:j(d({},D,((r={})[t]=n,r)));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ee=function(){var e=p(u().mark((function e(t){var n,r,a,o,i,p;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),S(!0),e.prev=2,n="",r="",D.email_or_phone_number&&(s(D.email_or_phone_number)?n=D.email_or_phone_number:c(D.email_or_phone_number)&&(r=D.email_or_phone_number)),n||r){e.next=10;break}return K(d({},G,{email_or_phone_number:"Invalid email or phone number"})),S(!1),e.abrupt("return");case 10:return a={email:n,phone_number:r,password:D.password||""},null!=m&&m.scope&&(a.scope=m.scope),null!=m&&m.state&&(a.state=m.state),_&&_.length&&(a.roles=_),e.next=16,X.login(a);case 16:if(i=(o=e.sent).data,!(p=o.errors)||!p.length){e.next=23;break}return g(p[0].message),S(!1),e.abrupt("return");case 23:if(!(i&&i.should_show_totp_screen&&i.authenticator_scanner_image&&i.authenticator_secret&&i.authenticator_recovery_codes)){e.next=26;break}return F({is_screen_visible:!0,email:a.email||"",phone_number:a.phone_number||"",authenticator_scanner_image:i.authenticator_scanner_image,authenticator_secret:i.authenticator_secret,authenticator_recovery_codes:i.authenticator_recovery_codes}),e.abrupt("return");case 26:if(!i||!(null!=i&&i.should_show_email_otp_screen||null!=i&&i.should_show_mobile_otp_screen||null!=i&&i.should_show_totp_screen)){e.next=29;break}return A({is_screen_visible:!0,email:a.email||"",phone_number:a.phone_number||"",is_totp:(null==i?void 0:i.should_show_totp_screen)||!1}),e.abrupt("return");case 29:i&&(g(""),Q({user:i.user||null,token:{access_token:i.access_token,expires_in:i.expires_in,refresh_token:i.refresh_token,id_token:i.id_token},config:Y,loading:!1})),l&&l(i),e.next=37;break;case 33:e.prev=33,e.t0=e.catch(2),S(!1),g(e.t0.message);case 37:case"end":return e.stop()}}),e,null,[[2,33]])})));return function(t){return e.apply(this,arguments)}}();return o.useEffect((function(){""===D.email_or_phone_number?K(d({},G,{email_or_phone_number:"Email OR Phone Number is required"})):s(D.email_or_phone_number||"")||c(D.email_or_phone_number||"")?K(d({},G,{email_or_phone_number:null})):K(d({},G,{email_or_phone_number:"Invalid Email OR Phone Number"}))}),[D.email_or_phone_number]),o.useEffect((function(){K(d({},G,""===D.password?{password:"Password is required"}:{password:null}))}),[D.password]),R.is_screen_visible?i.createElement(B,Object.assign({},{setView:a,onLogin:l,email:R.email||"",phone_number:R.phone_number||"",authenticator_scanner_image:R.authenticator_scanner_image,authenticator_secret:R.authenticator_secret,authenticator_recovery_codes:R.authenticator_recovery_codes||[]},{urlProps:m})):T.is_screen_visible?i.createElement(M,Object.assign({},{setView:a,onLogin:l,email:T.email||"",phone_number:T.phone_number||"",is_totp:T.is_totp||!1},{urlProps:m})):i.createElement(i.Fragment,null,f&&i.createElement(I,{type:r.Error,text:f,onClose:function(){g("")}}),i.createElement(i.Fragment,null,i.createElement("form",{onSubmit:ee,name:"authorizer-login-form"},i.createElement("div",{className:w},i.createElement("label",{className:E,htmlFor:"authorizer-login-email"},i.createElement("span",null,"* "),V(Y)),i.createElement("input",{name:"email_or_phone_number",id:"authorizer-login-email-or-phone-number",className:y+" "+(G.email_or_phone_number?x:null),placeholder:q(Y),type:"text",value:D.email_or_phone_number||"",onChange:function(e){return $("email_or_phone_number",e.target.value)}}),G.email_or_phone_number&&i.createElement("div",{className:k},G.email_or_phone_number)),i.createElement("div",{className:w},i.createElement("label",{className:E,htmlFor:"authorizer-login-password"},i.createElement("span",null,"* "),"Password"),i.createElement("input",{name:"password",id:"authorizer-login-password",className:y+" "+(G.password?x:null),placeholder:"********",type:"password",value:D.password||"",onChange:function(e){return $("password",e.target.value)}}),G.password&&i.createElement("div",{className:k},G.password)),i.createElement("br",null),i.createElement(P,{type:"submit",disabled:!!G.email_or_phone_number||!!G.password||!D.email_or_phone_number||!D.password||C,appearance:n.Primary},C?"Processing ...":"Log In")),a&&i.createElement(L,null,i.createElement(z,{onClick:function(){return a(t.ForgotPassword)},marginBottom:"10px"},"Forgot Password?"),Y.is_sign_up_enabled&&i.createElement("div",null,"Don't have an account?"," ",i.createElement(z,{onClick:function(){return a(t.Signup)}},"Sign Up")))))},J=function(e){var t=e.onMagicLinkLogin,a=e.urlProps,l=e.roles,c=o.useState(""),m=c[0],_=c[1],h=o.useState(!1),f=h[0],g=h[1],b=o.useState(""),C=b[0],z=b[1],S=o.useState({email:null}),L=S[0],N=S[1],T=o.useState({email:null}),A=T[0],O=T[1],R=v().authorizerRef,U=function(){var e=p(u().mark((function e(t,n){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:N(d({},L,((r={})[t]=n,r)));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),D=function(){var e=p(u().mark((function e(n){var r,o,i,s,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,g(!0),r={email:L.email||"",state:(null==a?void 0:a.state)||"",redirect_uri:(null==a?void 0:a.redirect_uri)||""},l&&l.length&&(r.roles=l),e.next=7,R.magicLinkLogin(r);case 7:if(i=(o=e.sent).data,s=o.errors,g(!1),!s||!s.length){e.next=14;break}return _(F(null==(c=s[0])?void 0:c.message)),e.abrupt("return");case 14:i&&(_(""),z(i.message||""),t&&t(i)),null!=a&&a.redirect_uri&&setTimeout((function(){window.location.replace(a.redirect_uri)}),3e3),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(1),g(!1),_(F(null==e.t0?void 0:e.t0.message));case 22:case"end":return e.stop()}}),e,null,[[1,18]])})));return function(t){return e.apply(this,arguments)}}();return o.useEffect((function(){""===L.email?O(d({},A,{email:"Email is required"})):L.email&&!s(L.email)?O(d({},A,{email:"Please enter valid email"})):O(d({},A,{email:null}))}),[L.email]),C?i.createElement(I,{type:r.Success,text:C}):i.createElement(i.Fragment,null,m&&i.createElement(I,{type:r.Error,text:m,onClose:function(){_("")}}),i.createElement("form",{onSubmit:D,name:"authorizer-magic-login-form"},i.createElement("div",{className:w},i.createElement("label",{className:E,htmlFor:"authorizer-magic-link-login-email"},i.createElement("span",null,"* "),"Email"),i.createElement("input",{name:"email",id:"authorizer-magic-link-login-email",className:y+" "+(A.email?x:null),placeholder:"eg. foo@bar.com",type:"email",value:L.email||"",onChange:function(e){return U("email",e.target.value)}}),A.email&&i.createElement("div",{className:k},A.email)),i.createElement("br",null),i.createElement(P,{type:"submit",disabled:f||!!A.email||!L.email,appearance:n.Primary},f?"Processing ...":"Send Email")))},Q=function(e){var t=e.onReset,a=e.showOTPInput,l=e.phone_number,s=function(e){void 0===e&&(e="");var t=e;!t&&h()&&(t=window.location.search);var n=new URLSearchParams(""+t);return Object.fromEntries(n.entries())}(),c=s.token,m=s.redirect_uri,_=o.useState(""),f=_[0],g=_[1],b=o.useState(!1),z=b[0],S=b[1],L=o.useState({otp:null,password:null,confirmPassword:null}),N=L[0],T=L[1],A=o.useState({otp:null,password:null,confirmPassword:null}),O=A[0],R=A[1],U=v(),D=U.authorizerRef,M=U.config,V=o.useState(!1),q=V[0],H=V[1],G=function(){var e=p(u().mark((function e(t,n){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:T(d({},N,((r={})[t]=n,r)));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),B=function(){var e=p(u().mark((function e(n){var r,a,o,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),S(!0),e.prev=2,e.next=5,D.resetPassword({token:c,otp:N.otp||"",phone_number:l||"",password:N.password||"",confirm_password:N.confirmPassword||""});case 5:if(a=(r=e.sent).data,o=r.errors,S(!1),!o||!o.length){e.next=12;break}return g(F(null==(i=o[0])?void 0:i.message)),e.abrupt("return");case 12:g(""),t?t(a):window.location.href=m||M.redirectURL||window.location.origin,e.next=20;break;case 16:e.prev=16,e.t0=e.catch(2),S(!1),g(F(e.t0.message));case 20:case"end":return e.stop()}}),e,null,[[2,16]])})));return function(t){return e.apply(this,arguments)}}();return o.useEffect((function(){R(d({},O,""===N.password?{password:"Password is required"}:{password:null}))}),[N.password]),o.useEffect((function(){R(d({},O,""===N.confirmPassword?{confirmPassword:"Confirm password is required"}:{confirmPassword:null}))}),[N.confirmPassword]),o.useEffect((function(){N.password&&N.confirmPassword&&R(d({},O,N.confirmPassword!==N.password?{password:"Password and confirm passwords don't match",confirmPassword:"Password and confirm passwords don't match"}:{password:null,confirmPassword:null}))}),[N.password,N.confirmPassword]),i.createElement(C,null,f&&i.createElement(I,{type:r.Error,text:f,onClose:function(){g("")}}),i.createElement("form",{onSubmit:B,name:"authorizer-reset-password-form"},a&&i.createElement("div",{className:w},i.createElement("label",{className:E,htmlFor:"authorizer-verify-otp"},i.createElement("span",null,"* "),"OTP (One Time Password)"),i.createElement("input",{name:"otp",id:"authorizer-verify-otp",className:y+" "+(O.otp?x:null),placeholder:"e.g.- AB123C",type:"password",value:N.otp||"",onChange:function(e){return G("otp",e.target.value)}}),O.otp&&i.createElement("div",{className:k},O.otp)),i.createElement("div",{className:w},i.createElement("label",{className:E,htmlFor:"authorizer-reset-password"},i.createElement("span",null,"* "),"Password"),i.createElement("input",{name:"password",id:"authorizer-reset-password",className:y+" "+(O.password?x:null),placeholder:"********",type:"password",value:N.password||"",onChange:function(e){return G("password",e.target.value)}}),O.password&&i.createElement("div",{className:k},O.password)),i.createElement("div",{className:w},i.createElement("label",{className:E,htmlFor:"authorizer-reset-confirm-password"},i.createElement("span",null,"* "),"Confirm Password"),i.createElement("input",{name:"confirmPassword",id:"authorizer-reset-confirm-password",className:y+" "+(O.confirmPassword?x:null),placeholder:"********",type:"password",value:N.confirmPassword||"",onChange:function(e){return G("confirmPassword",e.target.value)}}),O.confirmPassword&&i.createElement("div",{className:k},O.confirmPassword)),M.is_strong_password_enabled&&i.createElement(i.Fragment,null,i.createElement(j,{value:N.password||"",setDisableButton:H}),i.createElement("br",null)),i.createElement(P,{type:"submit",disabled:z||q||!!O.password||!!O.confirmPassword||!N.password||!N.confirmPassword,appearance:n.Primary},z?"Processing ...":"Continue")))},Y={is_screen_visible:!1,email:"",phone_number:""},X=function(e){var a=e.setView,l=e.onForgotPassword,m=e.onPasswordReset,_=e.urlProps,h=o.useState(""),f=h[0],g=h[1],b=o.useState(!1),C=b[0],S=b[1],N=o.useState(""),T=N[0],A=N[1],O=o.useState(d({},Y)),R=O[0],U=O[1],D=o.useState({email_or_phone_number:null}),j=D[0],M=D[1],H=o.useState({email_or_phone_number:null}),G=H[0],B=H[1],W=v(),Z=W.authorizerRef,K=W.config,J=function(){var e=p(u().mark((function e(t,n){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:M(d({},j,((r={})[t]=n,r)));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),X=function(){var e=p(u().mark((function e(t){var n,r,a,o,i,m;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,S(!0),n="",r="",j.email_or_phone_number&&(s(j.email_or_phone_number)?n=j.email_or_phone_number:c(j.email_or_phone_number)&&(r=j.email_or_phone_number)),n||r){e.next=10;break}return B(d({},G,{email_or_phone_number:"Invalid email or phone number"})),S(!1),e.abrupt("return");case 10:return e.next=12,Z.forgotPassword({email:n,phone_number:r,state:(null==_?void 0:_.state)||"",redirect_uri:(null==_?void 0:_.redirect_uri)||K.redirectURL||window.location.origin});case 12:if(o=(a=e.sent).data,i=a.errors,S(!1),!i||!i.length){e.next=19;break}return g(F(null==(m=i[0])?void 0:m.message)),e.abrupt("return");case 19:if(null==o||!o.message){e.next=25;break}if(g(""),A(o.message),null==o||!o.should_show_mobile_otp_screen){e.next=25;break}return U(d({},R,{is_screen_visible:!0,email:n,phone_number:r})),e.abrupt("return");case 25:l&&l(o),e.next=32;break;case 28:e.prev=28,e.t0=e.catch(1),S(!1),g(F(null==e.t0?void 0:e.t0.message));case 32:case"end":return e.stop()}}),e,null,[[1,28]])})));return function(t){return e.apply(this,arguments)}}();return o.useEffect((function(){""===j.email_or_phone_number?B(d({},G,{email_or_phone_number:"Email OR Phone Number is required"})):null===j.email_or_phone_number||s(j.email_or_phone_number||"")||c(j.email_or_phone_number||"")?B(d({},G,{email_or_phone_number:null})):B(d({},G,{email_or_phone_number:"Invalid Email OR Phone Number"}))}),[j.email_or_phone_number]),T?i.createElement(i.Fragment,null,i.createElement(I,{type:r.Success,text:T}),R.is_screen_visible&&i.createElement(Q,{showOTPInput:!0,onReset:m,phone_number:R.phone_number})):i.createElement(i.Fragment,null,f&&i.createElement(I,{type:r.Error,text:f,onClose:function(){g("")}}),i.createElement("p",{style:{textAlign:"center",margin:"10px 0px"}},"Please enter your ",V(K),".",i.createElement("br",null)," We will send you an email / otp to reset your password."),i.createElement("br",null),i.createElement("form",{onSubmit:X,name:"authorizer-forgot-password-form"},i.createElement("div",{className:w},i.createElement("label",{className:E,htmlFor:"authorizer-forgot-password-email-or-phone-number"},i.createElement("span",null,"* "),V(K)),i.createElement("input",{name:"email_or_phone_number",id:"authorizer-forgot-password-email-or-phone-number",className:y+" "+(G.email_or_phone_number?x:null),placeholder:q(K),type:"text",value:j.email_or_phone_number||"",onChange:function(e){return J("email_or_phone_number",e.target.value)}}),G.email_or_phone_number&&i.createElement("div",{className:k},G.email_or_phone_number)),i.createElement("br",null),i.createElement(P,{type:"submit",disabled:C||!!G.email_or_phone_number||!j.email_or_phone_number,appearance:n.Primary},C?"Processing ...":"Request Change")),a&&i.createElement(L,null,i.createElement("div",null,"Remember your password?"," ",i.createElement(z,{onClick:function(){return a(t.Login)}},"Log In"))))},$=function(){return i.createElement("div",{style:{position:"absolute",left:"10px",top:"12px",display:"flex"}},i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 291.32 291.32",width:"24px",height:"24px"},i.createElement("path",{d:"M145.66 0C65.219 0 0 65.219 0 145.66c0 80.45 65.219 145.66 145.66 145.66s145.66-65.21 145.66-145.66C291.319 65.219 226.1 0 145.66 0zm40.802 256.625c-.838-11.398-1.775-25.518-1.83-31.235-.364-4.388-.838-15.549-11.434-22.677 42.068-3.523 62.087-26.774 63.526-57.499 1.202-17.497-5.754-32.883-18.107-45.3.628-13.282-.401-29.023-1.256-35.941-9.486-2.731-31.608 8.949-37.79 13.947-13.037-5.062-44.945-6.837-64.336 0-13.747-9.668-29.396-15.64-37.926-13.974-7.875 17.452-2.813 33.948-1.275 35.914-10.142 9.268-24.289 20.675-20.447 44.572 6.163 35.04 30.816 53.94 70.508 58.564-8.466 1.73-9.896 8.048-10.606 10.788-26.656 10.997-34.275-6.791-37.644-11.425-11.188-13.847-21.23-9.832-21.849-9.614-.601.218-1.056 1.092-.992 1.511.564 2.986 6.655 6.018 6.955 6.263 8.257 6.154 11.316 17.27 13.2 20.438 11.844 19.473 39.374 11.398 39.638 11.562.018 1.702-.191 16.032-.355 27.184C64.245 245.992 27.311 200.2 27.311 145.66c0-65.365 52.984-118.348 118.348-118.348S264.008 80.295 264.008 145.66c0 51.008-32.318 94.332-77.546 110.965z",fill:"#2b414d"})))},ee=function(){return i.createElement("div",{style:{position:"absolute",left:"10px",top:"12px",display:"flex"}},i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24px",height:"24px"},i.createElement("g",{transform:"matrix(1, 0, 0, 1, 27.009001, -39.238998)"},i.createElement("path",{fill:"#4285F4",d:"M -3.264 51.509 C -3.264 50.719 -3.334 49.969 -3.454 49.239 L -14.754 49.239 L -14.754 53.749 L -8.284 53.749 C -8.574 55.229 -9.424 56.479 -10.684 57.329 L -10.684 60.329 L -6.824 60.329 C -4.564 58.239 -3.264 55.159 -3.264 51.509 Z"}),i.createElement("path",{fill:"#34A853",d:"M -14.754 63.239 C -11.514 63.239 -8.804 62.159 -6.824 60.329 L -10.684 57.329 C -11.764 58.049 -13.134 58.489 -14.754 58.489 C -17.884 58.489 -20.534 56.379 -21.484 53.529 L -25.464 53.529 L -25.464 56.619 C -23.494 60.539 -19.444 63.239 -14.754 63.239 Z"}),i.createElement("path",{fill:"#FBBC05",d:"M -21.484 53.529 C -21.734 52.809 -21.864 52.039 -21.864 51.239 C -21.864 50.439 -21.724 49.669 -21.484 48.949 L -21.484 45.859 L -25.464 45.859 C -26.284 47.479 -26.754 49.299 -26.754 51.239 C -26.754 53.179 -26.284 54.999 -25.464 56.619 L -21.484 53.529 Z"}),i.createElement("path",{fill:"#EA4335",d:"M -14.754 43.989 C -12.984 43.989 -11.404 44.599 -10.154 45.789 L -6.734 42.369 C -8.804 40.429 -11.514 39.239 -14.754 39.239 C -19.444 39.239 -23.494 41.939 -25.464 45.859 L -21.484 48.949 C -20.534 46.099 -17.884 43.989 -14.754 43.989 Z"}))))},te=function(){return i.createElement("div",{style:{position:"absolute",left:"10px",top:"12px",display:"flex"}},i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 50 50",width:"24px",height:"24px",fill:"#1877f2"},i.createElement("path",{d:"M41,4H9C6.24,4,4,6.24,4,9v32c0,2.76,2.24,5,5,5h32c2.76,0,5-2.24,5-5V9C46,6.24,43.76,4,41,4z M37,19h-2c-2.14,0-3,0.5-3,2 v3h5l-1,5h-4v15h-5V29h-4v-5h4v-3c0-4,2-7,6-7c2.9,0,4,1,4,1V19z"})))},ne=function(){return i.createElement("div",{style:{position:"absolute",left:"8px",top:"7.5px",display:"flex"}},i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",width:"32px",height:"32px"},i.createElement("path",{fill:"#0288D1",d:"M42,37c0,2.762-2.238,5-5,5H11c-2.761,0-5-2.238-5-5V11c0-2.762,2.239-5,5-5h26c2.762,0,5,2.238,5,5V37z"}),i.createElement("path",{fill:"#FFF",d:"M12 19H17V36H12zM14.485 17h-.028C12.965 17 12 15.888 12 14.499 12 13.08 12.995 12 14.514 12c1.521 0 2.458 1.08 2.486 2.499C17 15.887 16.035 17 14.485 17zM36 36h-5v-9.099c0-2.198-1.225-3.698-3.192-3.698-1.501 0-2.313 1.012-2.707 1.99C24.957 25.543 25 26.511 25 27v9h-5V19h5v2.616C25.721 20.5 26.85 19 29.738 19c3.578 0 6.261 2.25 6.261 7.274L36 36 36 36z"})))},re=function(){return i.createElement("div",{style:{position:"absolute",left:"10px",top:"10px",display:"flex"}},i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 315",width:"24px",height:"24px"},i.createElement("path",{d:"M213.803 167.03c.442 47.58 41.74 63.413 42.197 63.615-.35 1.116-6.599 22.563-21.757 44.716-13.104 19.153-26.705 38.235-48.13 38.63-21.05.388-27.82-12.483-51.888-12.483-24.061 0-31.582 12.088-51.51 12.871-20.68.783-36.428-20.71-49.64-39.793-27-39.033-47.633-110.3-19.928-158.406 13.763-23.89 38.36-39.017 65.056-39.405 20.307-.387 39.475 13.662 51.889 13.662 12.406 0 35.699-16.895 60.186-14.414 10.25.427 39.026 4.14 57.503 31.186-1.49.923-34.335 20.044-33.978 59.822M174.24 50.199c10.98-13.29 18.369-31.79 16.353-50.199-15.826.636-34.962 10.546-46.314 23.828-10.173 11.763-19.082 30.589-16.678 48.633 17.64 1.365 35.66-8.964 46.64-22.262"})))},ae=function(){return i.createElement("div",{style:{position:"absolute",left:"10px",top:"12px",display:"flex"}},i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",width:"24px",height:"24px"},i.createElement("path",{fill:"#03A9F4",d:"M42,12.429c-1.323,0.586-2.746,0.977-4.247,1.162c1.526-0.906,2.7-2.351,3.251-4.058c-1.428,0.837-3.01,1.452-4.693,1.776C34.967,9.884,33.05,9,30.926,9c-4.08,0-7.387,3.278-7.387,7.32c0,0.572,0.067,1.129,0.193,1.67c-6.138-0.308-11.582-3.226-15.224-7.654c-0.64,1.082-1,2.349-1,3.686c0,2.541,1.301,4.778,3.285,6.096c-1.211-0.037-2.351-0.374-3.349-0.914c0,0.022,0,0.055,0,0.086c0,3.551,2.547,6.508,5.923,7.181c-0.617,0.169-1.269,0.263-1.941,0.263c-0.477,0-0.942-0.054-1.392-0.135c0.94,2.902,3.667,5.023,6.898,5.086c-2.528,1.96-5.712,3.134-9.174,3.134c-0.598,0-1.183-0.034-1.761-0.104C9.268,36.786,13.152,38,17.321,38c13.585,0,21.017-11.156,21.017-20.834c0-0.317-0.01-0.633-0.025-0.945C39.763,15.197,41.013,13.905,42,12.429"})))},oe=function(){return i.createElement("div",{style:{position:"absolute",left:"10px",top:"12px",display:"flex"}},i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",width:"24px",height:"24px"},i.createElement("path",{fill:"#ff5722",d:"M6 6H22V22H6z",transform:"rotate(-180 14 14)"}),i.createElement("path",{fill:"#4caf50",d:"M26 6H42V22H26z",transform:"rotate(-180 34 14)"}),i.createElement("path",{fill:"#ffc107",d:"M26 26H42V42H26z",transform:"rotate(-180 34 34)"}),i.createElement("path",{fill:"#03a9f4",d:"M6 26H22V42H6z",transform:"rotate(-180 14 34)"})))},ie=function(){return i.createElement("div",{style:{position:"absolute",left:"10px",top:"12px",display:"flex"}},i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",width:"24",viewBox:"0 0 512 512"},i.createElement("path",{d:"M391.2 103.5H352.5v109.7h38.6zM285 103H246.4V212.8H285zM120.8 0 24.3 91.4V420.6H140.1V512l96.5-91.4h77.3L487.7 256V0zM449.1 237.8l-77.2 73.1H294.6l-67.6 64v-64H140.1V36.6H449.1z"})))},le=function(){return i.createElement("div",{style:{position:"absolute",left:"10px",top:"12px",display:"flex"}},i.createElement("img",{src:"https://authorizer.dev/_next/image?url=%2Fimages%2Froblox.png&w=24&q=24",alt:"roblox_logo"}))},se=function(e){var t=e.urlProps,r=e.roles,a=v().config,o=a.is_google_login_enabled||a.is_github_login_enabled||a.is_facebook_login_enabled||a.is_linkedin_login_enabled||a.is_apple_login_enabled||a.is_twitter_login_enabled||a.is_microsoft_login_enabled||a.is_twitch_login_enabled||a.is_roblox_login_enabled,l=d({},t||{},{scope:null==t?void 0:t.scope.join(" ")});r&&r.length&&(l.roles=r),l.redirect_uri||l.redirectURL||(l.redirect_uri=a.redirectURL);var s,c=(s=l,Object.keys(s).filter((function(e){return void 0!==s[e]})).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(s[e])})).join("&"));return i.createElement(i.Fragment,null,a.is_apple_login_enabled&&i.createElement("div",{id:"appleid-signin"},i.createElement(P,{appearance:n.Default,onClick:function(){window.location.href=a.authorizerURL+"/oauth_login/apple?"+c}},i.createElement(re,null),"Continue with Apple"),i.createElement("br",null)),a.is_google_login_enabled&&i.createElement(i.Fragment,null,i.createElement(P,{appearance:n.Default,onClick:function(){window.location.href=a.authorizerURL+"/oauth_login/google?"+c}},i.createElement(ee,null),"Continue with Google"),i.createElement("br",null)),a.is_github_login_enabled&&i.createElement(i.Fragment,null,i.createElement(P,{appearance:n.Default,onClick:function(){window.location.href=a.authorizerURL+"/oauth_login/github?"+c}},i.createElement($,null),"Continue with Github"),i.createElement("br",null)),a.is_facebook_login_enabled&&i.createElement(i.Fragment,null,i.createElement(P,{appearance:n.Default,onClick:function(){window.location.href=a.authorizerURL+"/oauth_login/facebook?"+c}},i.createElement(te,null),"Continue with Facebook"),i.createElement("br",null)),a.is_linkedin_login_enabled&&i.createElement(i.Fragment,null,i.createElement(P,{appearance:n.Default,onClick:function(){window.location.href=a.authorizerURL+"/oauth_login/linkedin?"+c}},i.createElement(ne,null),"Continue with LinkedIn"),i.createElement("br",null)),a.is_twitter_login_enabled&&i.createElement(i.Fragment,null,i.createElement(P,{appearance:n.Default,onClick:function(){window.location.href=a.authorizerURL+"/oauth_login/twitter?"+c}},i.createElement(ae,null),"Continue with Twitter"),i.createElement("br",null)),a.is_microsoft_login_enabled&&i.createElement(i.Fragment,null,i.createElement(P,{appearance:n.Default,onClick:function(){window.location.href=a.authorizerURL+"/oauth_login/microsoft?"+c}},i.createElement(oe,null),"Continue with Microsoft"),i.createElement("br",null)),a.is_twitch_login_enabled&&i.createElement(i.Fragment,null,i.createElement(P,{appearance:n.Default,onClick:function(){window.location.href=a.authorizerURL+"/oauth_login/twitch?"+c}},i.createElement(ie,null),"Continue with Twitch"),i.createElement("br",null)),a.is_roblox_login_enabled&&i.createElement(i.Fragment,null,i.createElement(P,{appearance:n.Default,onClick:function(){window.location.href=a.authorizerURL+"/oauth_login/roblox?"+c}},i.createElement(le,null),"Continue with Roblox"),i.createElement("br",null)),o&&(a.is_basic_authentication_enabled||a.is_mobile_basic_authentication_enabled||a.is_magic_link_login_enabled)&&i.createElement(S,null,"OR"))};exports.Authorizer=function(e){var n,r,a,l,s=e.onLogin,c=e.onSignup,u=e.onMagicLinkLogin,m=e.onForgotPassword,p=e.onPasswordReset,d=e.roles,_=o.useState(t.Login),f=_[0],g=_[1],b=v().config,w=new URLSearchParams(h()?window.location.search:""),E={state:w.get("state")||(r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_~.",a="",l=h()?window.crypto||window.msCrypto:null,l&&Array.from(l.getRandomValues(new Uint8Array(43))).forEach((function(e){return a+=r[e%r.length]})),a),scope:w.get("scope")?null==(n=w.get("scope"))?void 0:n.toString().split(" "):["openid","profile","email"]},y=w.get("redirect_uri")||w.get("redirectURL");return E.redirectURL=y||(h()?window.location.origin:y),E.redirect_uri=E.redirectURL,i.createElement(C,null,i.createElement(se,{urlProps:E,roles:d}),f===t.Login&&(b.is_basic_authentication_enabled||b.is_mobile_basic_authentication_enabled)&&!b.is_magic_link_login_enabled&&i.createElement(K,{setView:g,onLogin:s,urlProps:E,roles:d}),f===t.Signup&&(b.is_basic_authentication_enabled||b.is_mobile_basic_authentication_enabled)&&!b.is_magic_link_login_enabled&&b.is_sign_up_enabled&&i.createElement(G,{setView:g,onSignup:c,urlProps:E,roles:d}),f===t.Login&&b.is_magic_link_login_enabled&&i.createElement(J,{onMagicLinkLogin:u,urlProps:E,roles:d}),f===t.ForgotPassword&&i.createElement(X,{setView:g,onForgotPassword:m,onPasswordReset:p,urlProps:E}))},exports.AuthorizerBasicAuthLogin=K,exports.AuthorizerForgotPassword=X,exports.AuthorizerMagicLinkLogin=J,exports.AuthorizerProvider=function(e){var t=e.onStateChangeCallback,n=e.children,r=o.useReducer(g,d({},b,{config:d({},b.config,e.config)})),s=r[0],c=r[1],m=null,_=o.useRef(new l.Authorizer({authorizerURL:s.config.authorizerURL,redirectURL:h()?s.config.redirectURL||window.location.origin:s.config.redirectURL||"/",clientID:s.config.client_id})),v=function(){var e=p(u().mark((function e(){var t,n,r,o,i,l;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.current.getMetaData();case 2:if(n=(t=e.sent).data,r=t.errors,e.prev=5,!r||!r.length){e.next=8;break}throw new Error(r[0].message);case 8:return e.next=10,_.current.getSession();case 10:if(i=(o=e.sent).data,!(l=o.errors)||!l.length){e.next=15;break}throw new Error(l[0].message);case 15:i&&i.access_token&&i.user?(c({type:a.SET_AUTH_DATA,payload:d({},s,{token:{access_token:i.access_token,expires_in:i.expires_in,id_token:i.id_token,refresh_token:i.refresh_token||""},user:i.user,config:d({},s.config,n),loading:!1})}),m&&clearInterval(m),m=setInterval((function(){v()}),1e3*i.expires_in)):c({type:a.SET_AUTH_DATA,payload:d({},s,{token:null,user:null,config:d({},s.config,n),loading:!1})}),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(5),c({type:a.SET_AUTH_DATA,payload:d({},s,{token:null,user:null,config:d({},s.config,n),loading:!1})});case 21:case"end":return e.stop()}}),e,null,[[5,18]])})));return function(){return e.apply(this,arguments)}}();o.useEffect((function(){return v(),function(){m&&clearInterval(m)}}),[]),o.useEffect((function(){t&&t(s)}),[s]);var w=function(){var e=p(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c({type:a.SET_LOADING,payload:{loading:!0}}),e.next=3,_.current.logout();case 3:c({type:a.SET_AUTH_DATA,payload:{user:null,token:null,loading:!1,config:s.config}});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return i.createElement(f.Provider,{value:d({},s,{setUser:function(e){c({type:a.SET_USER,payload:{user:e}})},setLoading:function(e){c({type:a.SET_LOADING,payload:{loading:e}})},setToken:function(e){c({type:a.SET_TOKEN,payload:{token:e}}),null!=e&&e.access_token&&(m&&clearInterval(m),m=setInterval((function(){v()}),1e3*e.expires_in))},setAuthData:function(e){var t;c({type:a.SET_AUTH_DATA,payload:e}),null!=(t=e.token)&&t.access_token&&(m&&clearInterval(m),m=setInterval((function(){v()}),1e3*e.token.expires_in))},authorizerRef:_.current,logout:w})},n)},exports.AuthorizerResetPassword=Q,exports.AuthorizerSignup=G,exports.AuthorizerSocialLogin=se,exports.AuthorizerTOTPScanner=B,exports.AuthorizerVerifyOtp=M,exports.useAuthorizer=v;
//# sourceMappingURL=authorizer-react.cjs.production.min.js.map
